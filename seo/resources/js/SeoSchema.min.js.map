{"version":3,"file":"SeoSchema.min.js","sources":["../../../resources/js/SeoSchema.js"],"sourcesContent":["const Vue = window.Vue || {}\n\t, Craft = window.Craft || {}\n\t, $ = window.$ || {};\nVue.options.delimiters = [\"${\", \"}\"];\n\n// Helpers\n// =========================================================================\n\nfunction get (url, data, callback) {\n\t$.ajax({\n\t\turl: Craft.actionUrl + \"/seo/\" + url,\n\t\tmethod: \"POST\",\n\t\tdata: {\n\t\t\t[Craft.csrfTokenName]: Craft.csrfTokenValue,\n\t\t\t...data,\n\t\t},\n\t\txhrFields: { withCredentials: true },\n\t\tsuccess: data => {\n\t\t\tcallback && callback(data);\n\t\t},\n\t\terror: err => {\n\t\t\tCraft.cp.displayError(`<strong>SEO:</strong> ${err.message}`);\n\t\t},\n\t});\n}\n\n// Components\n// =========================================================================\n\nVue.component(\"schema-lane\", {\n\tprops: [\"laneSchema\", \"onClick\", \"selectedSchemaIds\"],\n\ttemplate: \"#seoSchemaLane\",\n});\n\n// SeoSchema\n// =========================================================================\n\nfunction SeoSchema (topLevelSchema, thingProperties) {\n\tnew Vue({\n\t\tel: \"#seoSchemaWrap\",\n\t\tdata: {\n\t\t\tready: false,\n\t\t\tschema: [topLevelSchema],\n\t\t\tselectedSchemaIds: [\"http://schema.org/Thing\"],\n\t\t\tselectedProperties: [thingProperties],\n\t\t},\n\t\tcreated: function () {\n\t\t\tthis.ready = true;\n\t\t},\n\t\tmethods: {\n\t\t\t\n\t\t\t// Events\n\t\t\t// =================================================================\n\t\t\t\n\t\t\tonSchemaClick: function (index) {\n\t\t\t\treturn (e, schemaId) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\n\t\t\t\t\tif (schemaId.indexOf(\"Thing\") > -1) {\n\t\t\t\t\t\tthis.schema = [topLevelSchema];\n\t\t\t\t\t\tthis.selectedSchemaIds = [schemaId];\n\t\t\t\t\t\tthis.selectedProperties = [thingProperties];\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.getChildren(schemaId, ({ children }) => {\n\t\t\t\t\t\tconst nextSchema = []\n\t\t\t\t\t\t\t, nextIds = [];\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet i = index;\n\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\tnextIds[i] = this.selectedSchemaIds[i];\n\t\t\t\t\t\t\tnextSchema[i] = this.schema[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tnextIds[index] = schemaId;\n\t\t\t\t\t\tnextSchema[index] = children;\n\t\t\t\t\t\tthis.selectedSchemaIds = nextIds;\n\t\t\t\t\t\tthis.schema = nextSchema;\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.getProperties(schemaId, ({ properties }) => {\n\t\t\t\t\t\t\tconst nextProperties = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tlet i = index;\n\t\t\t\t\t\t\twhile (i--)\n\t\t\t\t\t\t\t\tnextProperties[i] = this.selectedProperties[i];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tnextProperties[index] = properties;\n\t\t\t\t\t\t\tthis.selectedProperties = nextProperties;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t},\n\t\t\t\n\t\t\t// API\n\t\t\t// =================================================================\n\t\t\t\n\t\t\tgetChildren: function (schemaId, callback) {\n\t\t\t\tget(\"schema/getChildren\", { schemaId }, callback);\n\t\t\t},\n\t\t\t\n\t\t\tgetProperties: function (schemaId, callback) {\n\t\t\t\tget(\"schema/getProperties\", { schemaId }, callback);\n\t\t\t},\n\t\t\t\n\t\t},\n\t\t\n\t\tcomputed: {\n\t\t\tgetSelectedSchemaIdsReversed: function () {\n\t\t\t\treturn [...this.selectedSchemaIds].reverse();\n\t\t\t},\n\t\t\tgetSelectedPropertiesReversed: function () {\n\t\t\t\treturn [...this.selectedProperties].reverse();\n\t\t\t},\n\t\t},\n\t});\n}\n\nwindow.SeoSchema = SeoSchema;"],"names":["get","url","data","callback","ajax","Craft","actionUrl","csrfTokenName","csrfTokenValue","withCredentials","cp","displayError","err","message","SeoSchema","topLevelSchema","thingProperties","Vue","ready","index","e","schemaId","preventDefault","indexOf","schema","selectedSchemaIds","selectedProperties","getChildren","children","nextSchema","nextIds","i","_this","getProperties","properties","nextProperties","this","reverse","window","$","options","delimiters","component"],"mappings":"AAQA,SAASA,IAAKC,EAAKC,EAAMC,KACtBC,UACIC,MAAMC,UAAY,QAAUL,SACzB,uCAENI,MAAME,cAAgBF,MAAMG,gBAC1BN,cAESO,iBAAiB,WACrB,eACIN,EAASD,UAEf,kBACAQ,GAAGC,sCAAsCC,EAAIC,YAgBtD,SAASC,UAAWC,EAAgBC,OAC/BC,QACC,8BAEI,UACEF,sBACW,+CACCC,YAEb,gBACHE,OAAQ,0BAOE,SAAUC,qBACjB,SAACC,EAAGC,QACRC,iBAEED,EAASE,QAAQ,UAAY,WAC3BC,QAAUT,KACVU,mBAAqBJ,UACrBK,oBAAsBV,MAIvBW,YAAYN,EAAU,oBAAGO,IAAAA,SACvBC,KACHC,KAECC,EAAIZ,EACDY,OACEA,GAAKC,EAAKP,kBAAkBM,KACzBA,GAAKC,EAAKR,OAAOO,KAGrBZ,GAASE,IACNF,GAASS,IACfH,kBAAoBK,IACpBN,OAASK,IAETI,cAAcZ,EAAU,oBAAGa,IAAAA,WACzBC,KAEFJ,EAAIZ,EACDY,OACSA,GAAKC,EAAKN,mBAAmBK,GAE7CI,EAAehB,GAASe,IACnBR,mBAAqBS,oBASjB,SAAUd,EAAUlB,OAC5B,sBAAwBkB,YAAYlB,kBAG1B,SAAUkB,EAAUlB,OAC9B,wBAA0BkB,YAAYlB,4CAMb,6CAClBiC,KAAKX,oBAAmBY,yCAEL,6CACnBD,KAAKV,qBAAoBW,4cAhHlCpB,IAAMqB,OAAOrB,QAChBZ,MAAQiC,OAAOjC,UACfkC,EAAID,OAAOC,MACdtB,IAAIuB,QAAQC,YAAc,KAAM,KA0BhCxB,IAAIyB,UAAU,sBACL,aAAc,UAAW,8BACvB,mBAuFXJ,OAAOxB,UAAYA"}