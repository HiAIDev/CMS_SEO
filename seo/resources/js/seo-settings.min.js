function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=document.createElement(e),s=!0,o=!1,l=void 0;try{for(var c,u=Object.entries(n)[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value,h=i(d,2),f=h[0],v=h[1];v&&((void 0===v?"undefined":t(v))!==t(function(){})?("style"===f&&(v=v.replace(/(?:\r\n|\r|\n|\t|\s+)/g," ").trim()),a.setAttribute(f,v)):"ref"===f?v(a):a.addEventListener(f,v))}}catch(e){o=!0,l=e}finally{try{!s&&u.return&&u.return()}finally{if(o)throw l}}return Array.isArray(r)||(r=[r]),r.map(function(e){if(e)try{a.appendChild(e)}catch(t){a.appendChild(document.createTextNode(e))}}),a}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=(function(){function e(e){this.value=e}function t(t){function n(i,a){try{var s=t[i](a),o=s.value;o instanceof e?Promise.resolve(o.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(s.done?"return":"normal",s.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?n(i.key,i.arg):a=null}var i,a;this._invoke=function(e,t){return new Promise(function(r,s){var o={key:e,arg:t,resolve:r,reject:s,next:null};a?a=a.next=o:(i=a=o,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=(function(){function e(t){n(this,e),this.text=t?e.cleanText(t):t}r(e,[{key:"fleschKincaidReadingEase",value:function(){return Math.round(10*(206.835-1.015*this.averageWordsPerSentence()-84.6*this.averageSyllablesPerWord()))/10}},{key:"fleschKincaidGradeLevel",value:function(){return Math.round(10*(.39*this.averageWordsPerSentence()+11.8*this.averageSyllablesPerWord()-15.59))/10}},{key:"gunningFogScore",value:function(){return Math.round(.4*(this.averageWordsPerSentence()+this.percentageWordsWithThreeSyllables(!1))*10)/10}},{key:"colemanLiauIndex",value:function(){return Math.round(10*(this.letterCount()/this.wordCount()*5.89-this.sentenceCount()/this.wordCount()*.3-15.8))/10}},{key:"smogIndex",value:function(){return Math.round(1.043*Math.sqrt(this.wordsWithThreeSyllables()*(30/this.sentenceCount())+3.1291)*10)/10}},{key:"automatedReadabilityIndex",value:function(){return Math.round(10*(this.letterCount()/this.wordCount()*4.71+this.wordCount()/this.sentenceCount()*.5-21.43))/10}},{key:"textLength",value:function(){return this.text.length}},{key:"letterCount",value:function(){return this.text.replace(/[^a-z]+/gi,"").length}},{key:"sentenceCount",value:function(){return this.text.replace(/[^.!?]/g,"").length||1}},{key:"wordCount",value:function(){return this.words().length||1}},{key:"words",value:function(){return this._words?this._words:(this._words=this.text.split(/[^a-z0-9']+/i),this._words)}},{key:"averageWordsPerSentence",value:function(){return this.wordCount()/this.sentenceCount()}},{key:"averageSyllablesPerWord",value:function(){var t=0,n=this.wordCount();return this.text.split(/\s+/).forEach(function(n){t+=e.syllableCount(n)}),(t||1)/(n||1)}},{key:"wordsWithThreeSyllables",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=0;return t=!1!==t,this.text.split(/\s+/).forEach(function(r){r.match(/^[A-Z]/)&&!t||e.syllableCount(r)>2&&n++}),n}},{key:"percentageWordsWithThreeSyllables",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.wordsWithThreeSyllables(e)/this.wordCount()*100}}],[{key:"cleanText",value:function(e){return["li","p","h1","h2","h3","h4","h5","h6","dd"].forEach(function(t){e.replace("</"+t+">",".")}),e=e.replace(/<[^>]+>/g,"").replace(/[,:;()-]/g," ").replace(/[.!?]/g,".").replace(/^\s+/g,"").replace(/[ ]*(\n|\r\n|\r)[ ]*/g," ").replace(/([.])[. ]+/g,".").replace(/[ ]*([.])/g,". ").replace(/\s+/g," ").replace(/\s+$/g,"").replace(/'/g,""),e+="."}},{key:"syllableCount",value:function(e){var t=0,n=0;e=e.toLowerCase().replace(/[^a-z]/g,"");var r={simile:3,forever:3,shoreline:2};if(r.hasOwnProperty(e))return r[e];var i=[/cial/,/tia/,/cius/,/cious/,/giu/,/ion/,/iou/,/sia$/,/[^aeiuoyt]{2,}ed$/,/.ely$/,/[cg]h?e[rsd]?$/,/rved?$/,/[aeiouy][dt]es?$/,/[aeiouy][^aeiouydt]e[rsd]?$/,/^[dr]e[aeiou][^aeiou]+$/,/[aeiouy]rse$/],a=[/ia/,/riet/,/dien/,/iu/,/io/,/ii/,/[aeiouym]bl$/,/[aeiou]{3}/,/^mc/,/ism$/,/([^aeiouy])\1l$/,/[^l]lien/,/^coa[dglx]./,/[^gq]ua[^auieo]/,/dnt$/,/uity$/,/ie(r|st)$/];[/^un/,/^fore/,/ly$/,/less$/,/ful$/,/ers?$/,/ings?$/].forEach(function(t){e.match(t)&&(e=e.replace(t,""),n++)});var s=e.split(/[^aeiouy]+/gi).filter(function(e){return!!e.replace(/\s+/gi,"").length}).length;return t=s+n,i.forEach(function(n){e.match(n)&&t--}),a.forEach(function(n){e.match(n)&&t++}),t||1}}])}(),{301:"301 (Permanent)",302:"302 (Temporary)"}),s=function(){function i(e,t){var r=this;n(this,i),this.onSubmitNew=function(e){e.preventDefault();var t=e.target,n=t.getElementsByClassName("spinner")[0],i=t.elements[r.namespaceField("uri")],a=t.elements[r.namespaceField("to")],s=t.elements[r.namespaceField("type")],o=!0;""===i.value.trim()?(i.classList.add("error"),o=!1):i.classList.remove("error"),""===a.value.trim()?(a.classList.add("error"),o=!1):a.classList.remove("error"),o&&(n.classList.remove("hidden"),r.post("addRedirect",{uri:i.value,to:a.value,type:s.value},function(e){var o=e.id;r.table.appendChild(r.rowStatic(o,i.value,a.value,s.value)),Craft.cp.displayNotice("<strong>SEO:</strong> Redirect added successfully!"),n.classList.add("hidden"),t.reset(),i.focus()},function(e){Craft.cp.displayError("<strong>SEO:</strong> "+e),n.classList.add("hidden")}))},this.onSubmitBulk=function(e){e.preventDefault();var t=e.target,n=t.getElementsByClassName("spinner")[0],i=t.elements[r.namespaceField("redirects")],a=t.elements[r.namespaceField("separator")],s=t.elements[r.namespaceField("type")],o=!0;""===i.value.trim()?(i.classList.add("error"),o=!1):i.classList.remove("error"),""===a.value?(a.classList.add("error"),o=!1):a.classList.remove("error"),o&&(n.classList.remove("hidden"),r.post("bulkAddRedirects",{redirects:i.value,separator:a.value,type:s.value},function(e){e.redirects.forEach(function(e){var t=e.id,n=e.uri,i=e.to,a=e.type;r.table.appendChild(r.rowStatic(t,n,i,a))}),Craft.cp.displayNotice("<strong>SEO:</strong> Redirects added successfully!"),n.classList.add("hidden"),t.reset()},function(e){Craft.cp.displayError("<strong>SEO:</strong> "+e),n.classList.add("hidden")}))},this.onUpdate=function(e){e.preventDefault();var t=e.target,n=t.getElementsByClassName("spinner")[0],i=t.elements[r.namespaceField("id")],a=t.elements[r.namespaceField("uri")],s=t.elements[r.namespaceField("to")],o=t.elements[r.namespaceField("type")],l=!0;""===a.value.trim()?(a.classList.add("error"),l=!1):a.classList.remove("error"),""===s.value.trim()?(s.classList.add("error"),l=!1):s.classList.remove("error"),l&&(n.classList.remove("hidden"),r.post("updateRedirect",{id:i.value,uri:a.value,to:s.value,type:o.value},function(){var e=r.editRow;r.cancelCurrentEdit(),r.table.insertBefore(r.rowStatic(i.value,a.value,s.value,o.value),e),r.table.removeChild(e)},function(e){Craft.cp.displayError("<strong>SEO:</strong> "+e),n.classList.add("hidden")}))},this.onEditClick=function(e,t){e.preventDefault();var n=e.target.dataset,i=n.id,a=n.uri,s=n.to,o=n.type;r.cancelCurrentEdit();var l=r.rowEdit(i,a,s,o);r.editRow=t,r.cancelCurrentEdit=function(){r.table.insertBefore(t,l[0]),r.table.removeChild(l[0]),r.table.removeChild(l[1]),r.cancelCurrentEdit=function(){},r.editRow=null},r.table.insertBefore(l[0],t),r.table.insertBefore(l[1],t),l[0].getElementsByTagName("input")[1].focus(),r.table.removeChild(t)},this.onDeleteClick=function(e,t){e.preventDefault(),confirm("Delete this redirect?")&&r.post("removeRedirect",{id:t.dataset.id},function(){Craft.cp.displayNotice("<strong>SEO:</strong> Redirect deleted"),r.table.removeChild(t)},function(e){Craft.cp.displayNotice("<strong>SEO:</strong> "+e)})},this.ns=e,this.csrf=t,this.table=document.getElementById(e+"-redirectTable"),this.tableForm=document.getElementById(e+"-tableForm"),this.newForm=document.getElementById(e+"-redirectsNew"),this.bulkForm=document.getElementById(e+"-redirectsBulk"),this.cancelCurrentEdit=function(){},this.editRow=null,this.tableForm.addEventListener("submit",this.onUpdate),this.newForm.addEventListener("submit",this.onSubmitNew),this.bulkForm.addEventListener("submit",this.onSubmitBulk),this.initTable()}return r(i,[{key:"initTable",value:function(){var e=this;[].slice.call(this.table.getElementsByTagName("tr")).forEach(function(t){var n=t.getElementsByTagName("a");n[0].addEventListener("click",function(n){e.onEditClick(n,t)}),n[1].addEventListener("click",function(n){e.onDeleteClick(n,t)})})}},{key:"namespaceField",value:function(e){return this.ns+"["+e+"]"}},{key:"post",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=new FormData;a.append(this.csrf.name,this.csrf.token),a.append("action","seo/redirects/"+e),Object.keys(n).forEach(function(e){n.hasOwnProperty(e)&&a.append(e,n[e])});var s=new XMLHttpRequest;s.open("POST","/",!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.onload=function(){var e=s.responseText;s.status>=200&&s.status<400?(e=JSON.parse(e)).hasOwnProperty("success")?r(e):e.hasOwnProperty("error")&&i(t(e.error)===t("")?e.error:e.error[Object.keys(e.error)[0]][0]):i(e)},s.onerror=function(){i("An unknown error has occurred")},s.send(a)}},{key:"rowStatic",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:301,o=e("tr",{tabindex:0,"data-id":t},[e("td",{class:"redirects--title-col"},[e("div",{class:"element small"},[e("div",{class:"label"},[e("span",{class:"title"},[e("a",{href:"#",title:"Edit Redirect","data-id":t,"data-uri":n,"data-to":i,"data-type":s,click:function(e){return r.onEditClick(e,o)}},n)])])])]),e("td",{},i),e("td",{},a[s]),e("td",{class:"thin action"},[e("a",{class:"delete icon",title:"Delete",click:function(e){return r.onDeleteClick(e,o)}})])]);return o}},{key:"rowEdit",value:function(t,n,r,i){var s=this;return[e("tr",{class:"redirects--edit-row"},[e("td",{},[e("input",{value:t,type:"hidden",name:this.namespaceField("id")}),e("input",{value:n,type:"text",class:"text fullwidth",name:this.namespaceField("uri")})]),e("td",{},[e("input",{value:r,type:"text",class:"text fullwidth",name:this.namespaceField("to")})]),e("td",{},[e("div",{class:"select"},[e("select",{name:this.namespaceField("type")},Object.keys(a).map(function(t){var n={value:t};return i===t&&(n.selected="selected"),e("option",n,a[t])}))])]),e("td",{},[e("div",{class:"spinner hidden"})])]),e("tr",{class:"redirects--edit-controls"},[e("td",{colspan:4},[e("input",{class:"btn submit",type:"submit",value:"Update"}),e("input",{class:"btn",type:"button",value:"Cancel",click:function(){s.cancelCurrentEdit()}})])])]}}]),i}(),o=function e(t,n,r){switch(this.namespace=t,this.csrf={name:r[0],token:r[1]},n){case"sitemap":new e.EditableTable(this.namespace+"-customUrls",this.namespace+"-addCustomUrl");break;case"redirects":this.redirectsForm();break;case"settings":this.sitemapName()}};window.SeoSettings=o,o.prototype.sitemapName=function(){var e=document.getElementById(this.namespace+"-sitemapNameExample");document.getElementById(this.namespace+"-sitemapName").addEventListener("input",function(){e.textContent=this.value+".xml"})},o.prototype.redirectsForm=function(){new s(this.namespace,this.csrf)},(o.EditableTable=function(e,t,n){var r=this;this.rowCb="function"==typeof n?n:function(){},this.table=document.getElementById(e).getElementsByTagName("tbody")[0],this.row=this.table.firstElementChild.cloneNode(!0),this.table.firstElementChild.remove(),this.row.classList.remove("hidden"),[].slice.call(this.table.getElementsByClassName("delete")).forEach(function(e){e.addEventListener("click",function(){e.parentNode.parentNode.remove(),r.rowCb()})}),document.getElementById(t).addEventListener("click",function(){r.addRow()})}).prototype.addRow=function(){var e=this,t=this.row.cloneNode(!0);t.innerHTML=t.innerHTML.replace(/{i}/g,this.table.childNodes.length-2),t.getElementsByClassName("delete")[0].addEventListener("click",function(){t.remove(),e.rowCb()}),this.table.appendChild(t),this.rowCb()};
//# sourceMappingURL=seo-settings.min.js.map
