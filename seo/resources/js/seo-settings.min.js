var SeoSettings=function(e,t){var n=this;switch(this.namespace=e,t){case"sitemap":new SeoSettings.EditableTable(this.namespace+"-customUrls",this.namespace+"-addCustomUrl");break;case"redirects":var i=document.getElementById(this.namespace+"-redirects"),a=document.getElementById(this.namespace+"-redirects-field");new SeoSettings.EditableTable(this.namespace+"-redirects",this.namespace+"-addRedirect",function(){n.redirectsForm(i,a)}),this.redirectsForm(i,a);break;case"settings":this.sitemapName(),this.populateFields()}};SeoSettings.prototype.sitemapName=function(){var e=document.getElementById(this.namespace+"-sitemapNameExample");document.getElementById(this.namespace+"-sitemapName").addEventListener("input",function(){e.textContent=this.value+".xml"})},SeoSettings.prototype.redirectsForm=function(e,t){function n(){var n=[];[].slice.call(e.querySelectorAll("tbody tr:not(.hidden)")).forEach(function(e){n.push({id:+e.getAttribute("data-id"),uri:e.querySelector('[data-name="redirects-uri"]').value.trim(),to:e.querySelector('[data-name="redirects-to"]').value.trim(),type:e.querySelector('[data-name="redirects-type"]').value})}),t.value=JSON.stringify(n).replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f")}n(),[].slice.call(document.querySelectorAll("[data-name]")).forEach(function(e){e.addEventListener("input",n)})},SeoSettings.prototype.populateFields=function(){document.getElementById("settings-populateAllEntriesBtn").addEventListener("click",function(e){e.preventDefault();var t=[].slice.call(document.getElementById("settings-populateEntries").querySelectorAll("input[type=checkbox]:checked")).reduce(function(e,t){if("*"===t.value)return e;var n=t.value.split("-")[1].split("|");return e.push({section:+n[0],type:+n[1],fields:n[2].split(":").map(function(e){return+e})}),e},[]);console.log(t)})},SeoSettings.EditableTable=function(e,t,n){var i=this;this.rowCb="function"==typeof n?n:function(){},this.table=document.getElementById(e).getElementsByTagName("tbody")[0],this.row=this.table.firstElementChild.cloneNode(!0),this.table.firstElementChild.remove(),this.row.classList.remove("hidden"),[].slice.call(this.table.getElementsByClassName("delete")).forEach(function(e){e.addEventListener("click",function(){e.parentNode.parentNode.remove(),i.rowCb()})}),document.getElementById(t).addEventListener("click",function(){i.addRow()})},SeoSettings.EditableTable.prototype.addRow=function(){var e=this,t=this.row.cloneNode(!0);t.innerHTML=t.innerHTML.replace(/\{i}/g,this.table.childNodes.length-2),t.getElementsByClassName("delete")[0].addEventListener("click",function(){t.remove(),e.rowCb()}),this.table.appendChild(t),this.rowCb()};