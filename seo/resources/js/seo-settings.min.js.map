{"version":3,"file":"seo-settings.min.js","sources":["../../../resources/js/_helpers/createElement.js","../../../resources/js/Redirects.js","../../../resources/js/_helpers/TextStatistics.js","../../../resources/js/seo-settings.js"],"sourcesContent":["/**\n * ## Create Element\n * Quick and easy DOM element creation\n *\n * @param {string=} tag - The element tag\n * @param {object=} attributes - The attributes to add, mapping the key as\n *     the attribute name, and the value as its value. If the value is a\n *     function, it will be added as an event.\n * @param {(Array|*)=} children - An array of children (can be a mixture of\n *     Nodes to append, or other values to be stringified and appended\n *     as text).\n * @return {Element} - The created element\n */\nexport default function createElement (\n\ttag = 'div',\n\tattributes = {},\n\tchildren = []\n) {\n\tconst elem = document.createElement(tag);\n\t\n\tfor (let [key, value] of Object.entries(attributes)) {\n\t\tif (!value) continue;\n\t\t\n\t\tif (typeof value === typeof (() => {})) {\n\t\t\tif (key === 'ref') value(elem);\n\t\t\telse elem.addEventListener(key, value);\n\t\t\tcontinue;\n\t\t}\n\t\t\n\t\tif (key === 'style')\n\t\t\tvalue = value.replace(/(?:\\r\\n|\\r|\\n|\\t|\\s+)/g, ' ').trim();\n\t\t\n\t\telem.setAttribute(key, value);\n\t}\n\t\n\tif (!Array.isArray(children))\n\t\tchildren = [children];\n\t\n\tchildren.map(child => {\n\t\tif (!child) return;\n\t\t\n\t\ttry {\n\t\t\telem.appendChild(child);\n\t\t} catch (_) {\n\t\t\telem.appendChild(document.createTextNode(child));\n\t\t}\n\t});\n\t\n\treturn elem;\n}","/* globals Craft */\n/**\n * SEO Redirects\n *\n * @author    Tam McDonald\n * @copyright Ether Creative 2017\n * @link      https://ethercreative.co.uk\n * @package   SEO\n * @since     1.5.0\n */\nimport { c } from \"./helpers\";\n\nconst REDIRECT_TYPES = {\n\t\"301\": \"301 (Permanent)\",\n\t\"302\": \"302 (Temporary)\",\n};\n\nexport default class Redirects {\n\t\n\tconstructor (namespace, csrf) {\n\t\tthis.ns = namespace;\n\t\tthis.csrf = csrf;\n\t\t\n\t\tthis.table = document.getElementById(namespace + \"-redirectTable\");\n\t\tthis.tableForm = document.getElementById(namespace + \"-tableForm\");\n\t\tthis.newForm = document.getElementById(namespace + \"-redirectsNew\");\n\t\tthis.bulkForm = document.getElementById(namespace + \"-redirectsBulk\");\n\t\t\n\t\tthis.cancelCurrentEdit = () => {};\n\t\tthis.editRow = null;\n\t\t\n\t\tthis.tableForm.addEventListener(\"submit\", this.onUpdate);\n\t\tthis.newForm.addEventListener(\"submit\", this.onSubmitNew);\n\t\tthis.bulkForm.addEventListener(\"submit\", this.onSubmitBulk);\n\t\t\n\t\tthis.initTable();\n\t}\n\t\n\tinitTable () {\n\t\t[].slice.call(this.table.getElementsByTagName(\"tr\")).forEach(row => {\n\t\t\tconst links = row.getElementsByTagName(\"a\");\n\t\t\t\n\t\t\tlinks[0].addEventListener(\"click\", e => {\n\t\t\t\tthis.onEditClick(e, row);\n\t\t\t});\n\t\t\t\n\t\t\tlinks[1].addEventListener(\"click\", e => {\n\t\t\t\tthis.onDeleteClick(e, row);\n\t\t\t});\n\t\t});\n\t}\n\t\n\t// Events\n\t// =========================================================================\n\t\n\tonSubmitNew = e => {\n\t\te.preventDefault();\n\t\tconst form = e.target\n\t\t\t, spinner = form.getElementsByClassName(\"spinner\")[0];\n\t\t\n\t\tconst uri  = form.elements[this.namespaceField(\"uri\")]\n\t\t\t, to   = form.elements[this.namespaceField(\"to\")]\n\t\t\t, type = form.elements[this.namespaceField(\"type\")];\n\t\t\n\t\t// Validate\n\t\tlet valid = true;\n\t\tif (uri.value.trim() === \"\") {\n\t\t\turi.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else uri.classList.remove(\"error\");\n\t\t\n\t\tif (to.value.trim() === \"\") {\n\t\t\tto.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else to.classList.remove(\"error\");\n\t\t\n\t\tif (!valid) return;\n\t\t\n\t\t// Submit\n\t\tspinner.classList.remove(\"hidden\");\n\t\t\n\t\tthis.post(\"addRedirect\", {\n\t\t\turi: uri.value,\n\t\t\tto: to.value,\n\t\t\ttype: type.value,\n\t\t}, ({ id }) => {\n\t\t\tthis.table.appendChild(this.rowStatic(\n\t\t\t\tid, uri.value, to.value, type.value\n\t\t\t));\n\t\t\t\n\t\t\tCraft.cp.displayNotice(\n\t\t\t\t\"<strong>SEO:</strong> Redirect added successfully!\"\n\t\t\t);\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t\t\n\t\t\tform.reset();\n\t\t\turi.focus();\n\t\t}, error => {\n\t\t\tCraft.cp.displayError(\"<strong>SEO:</strong> \" + error);\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t});\n\t};\n\t\n\tonSubmitBulk = e => {\n\t\te.preventDefault();\n\t\tconst form = e.target\n\t\t\t, spinner = form.getElementsByClassName(\"spinner\")[0];\n\t\t\n\t\tconst redirects = form.elements[this.namespaceField(\"redirects\")]\n\t\t\t, separator = form.elements[this.namespaceField(\"separator\")]\n\t\t\t, type      = form.elements[this.namespaceField(\"type\")];\n\t\t\n\t\t// Validate\n\t\tlet valid = true;\n\t\tif (redirects.value.trim() === \"\") {\n\t\t\tredirects.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else redirects.classList.remove(\"error\");\n\t\t\n\t\tif (separator.value === \"\") {\n\t\t\tseparator.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else separator.classList.remove(\"error\");\n\t\t\n\t\tif (!valid) return;\n\t\t\n\t\t// Submit\n\t\tspinner.classList.remove(\"hidden\");\n\t\t\n\t\tthis.post(\"bulkAddRedirects\", {\n\t\t\tredirects: redirects.value,\n\t\t\tseparator: separator.value,\n\t\t\ttype: type.value,\n\t\t}, ({ redirects }) => {\n\t\t\tredirects.forEach(({ id, uri, to, type }) => {\n\t\t\t\tthis.table.appendChild(this.rowStatic(\n\t\t\t\t\tid, uri, to, type\n\t\t\t\t));\n\t\t\t});\n\t\t\t\n\t\t\tCraft.cp.displayNotice('<strong>SEO:</strong> Redirects added successfully!');\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t\t\n\t\t\tform.reset();\n\t\t}, error => {\n\t\t\tCraft.cp.displayError('<strong>SEO:</strong> ' + error);\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t});\n\t};\n\t\n\t// TODO: Remove save / update boilerplate\n\t\n\tonUpdate = e => {\n\t\te.preventDefault();\n\t\tconst form = e.target\n\t\t\t, spinner = form.getElementsByClassName(\"spinner\")[0];\n\t\t\n\t\tconst id  = form.elements[this.namespaceField(\"id\")]\n\t\t\t, uri  = form.elements[this.namespaceField(\"uri\")]\n\t\t\t, to   = form.elements[this.namespaceField(\"to\")]\n\t\t\t, type = form.elements[this.namespaceField(\"type\")];\n\t\t\n\t\t// Validate\n\t\tlet valid = true;\n\t\tif (uri.value.trim() === \"\") {\n\t\t\turi.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else uri.classList.remove(\"error\");\n\t\t\n\t\tif (to.value.trim() === \"\") {\n\t\t\tto.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else to.classList.remove(\"error\");\n\t\t\n\t\tif (!valid) return;\n\t\t\n\t\t// Submit\n\t\tspinner.classList.remove(\"hidden\");\n\t\t\n\t\tthis.post(\"updateRedirect\", {\n\t\t\tid: id.value,\n\t\t\turi: uri.value,\n\t\t\tto: to.value,\n\t\t\ttype: type.value,\n\t\t}, () => {\n\t\t\tconst row = this.editRow;\n\t\t\t\n\t\t\tthis.cancelCurrentEdit();\n\t\t\t\n\t\t\tthis.table.insertBefore(\n\t\t\t\tthis.rowStatic(\n\t\t\t\t\tid.value, uri.value, to.value, type.value\n\t\t\t\t),\n\t\t\t\trow\n\t\t\t);\n\t\t\t\n\t\t\tthis.table.removeChild(row);\n\t\t}, error => {\n\t\t\tCraft.cp.displayError('<strong>SEO:</strong> ' + error);\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t});\n\t};\n\t\n\tonEditClick = (e, row) => {\n\t\te.preventDefault();\n\t\tconst { id, uri, to, type } = e.target.dataset;\n\t\tthis.cancelCurrentEdit();\n\t\t\n\t\tconst editRows = this.rowEdit(id, uri, to, type);\n\t\t\n\t\tthis.editRow = row;\n\t\t\n\t\tthis.cancelCurrentEdit = () => {\n\t\t\tthis.table.insertBefore(row, editRows[0]);\n\t\t\tthis.table.removeChild(editRows[0]);\n\t\t\tthis.table.removeChild(editRows[1]);\n\t\t\t\n\t\t\tthis.cancelCurrentEdit = () => {};\n\t\t\tthis.editRow = null;\n\t\t};\n\t\t\n\t\tthis.table.insertBefore(\n\t\t\teditRows[0],\n\t\t\trow\n\t\t);\n\t\t\n\t\tthis.table.insertBefore(\n\t\t\teditRows[1],\n\t\t\trow\n\t\t);\n\t\t\n\t\teditRows[0].getElementsByTagName(\"input\")[1].focus();\n\t\t\n\t\tthis.table.removeChild(row);\n\t};\n\t\n\tonDeleteClick = (e, row) => {\n\t\te.preventDefault();\n\t\t\n\t\tif (!confirm(\"Delete this redirect?\"))\n\t\t\treturn;\n\t\t\n\t\tthis.post(\"removeRedirect\", {\n\t\t\tid: row.dataset.id\n\t\t}, () => {\n\t\t\tCraft.cp.displayNotice('<strong>SEO:</strong> Redirect deleted');\n\t\t\tthis.table.removeChild(row);\n\t\t}, error => {\n\t\t\tCraft.cp.displayNotice('<strong>SEO:</strong> ' + error);\n\t\t});\n\t};\n\t\n\t// Helpers\n\t// =========================================================================\n\t\n\tnamespaceField (handle) {\n\t\treturn `${this.ns}[${handle}]`;\n\t}\n\t\n\tpost (\n\t\taction,\n\t\tfields = {},\n\t\tonSuccess = () => {},\n\t\tonError = () => {}\n\t) {\n\t\tconst formData = new FormData();\n\t\t\n\t\tformData.append(this.csrf.name, this.csrf.token);\n\t\tformData.append(\"action\", `seo/redirects/${action}`);\n\t\t\n\t\tObject.keys(fields).forEach(key => {\n\t\t\tif (fields.hasOwnProperty(key))\n\t\t\t\tformData.append(key, fields[key]);\n\t\t});\n\t\t\n\t\tconst xhr = new XMLHttpRequest();\n\t\txhr.open('POST', \"/\", true);\n\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\t\t\n\t\txhr.onload = function() {\n\t\t\tlet data = xhr.responseText;\n\t\t\tif (xhr.status >= 200 && xhr.status < 400) {\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t\tif (data.hasOwnProperty(\"success\")) {\n\t\t\t\t\tonSuccess(data);\n\t\t\t\t} else if (data.hasOwnProperty(\"error\")) {\n\t\t\t\t\tif (typeof data.error === typeof \"\") {\n\t\t\t\t\t\tonError(data.error);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonError(data.error[Object.keys(data.error)[0]][0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tonError(data);\n\t\t\t}\n\t\t};\n\t\t\n\t\txhr.onerror = function () {\n\t\t\tonError(\"An unknown error has occurred\");\n\t\t};\n\t\t\n\t\txhr.send(formData);\n\t}\n\t\n\trowStatic (id = -1, uri = \"\", to = \"\", type = 301) {\n\t\tconst row = c(\"tr\", { \"tabindex\": 0, \"data-id\": id }, [\n\t\t\t// URI\n\t\t\tc(\"td\", { \"class\": \"redirects--title-col\" }, [\n\t\t\t\tc(\"div\", { \"class\": \"element small\" }, [\n\t\t\t\t\tc(\"div\", { \"class\": \"label\" }, [\n\t\t\t\t\t\tc(\"span\", { \"class\": \"title\" }, [\n\t\t\t\t\t\t\tc(\"a\", {\n\t\t\t\t\t\t\t\t\"href\": \"#\",\n\t\t\t\t\t\t\t\t\"title\": \"Edit Redirect\",\n\t\t\t\t\t\t\t\t\"data-id\": id,\n\t\t\t\t\t\t\t\t\"data-uri\": uri,\n\t\t\t\t\t\t\t\t\"data-to\": to,\n\t\t\t\t\t\t\t\t\"data-type\": type,\n\t\t\t\t\t\t\t\t\"click\": e => this.onEditClick(e, row)\n\t\t\t\t\t\t\t}, uri)\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t]),\n\t\t\t\n\t\t\t// To\n\t\t\tc(\"td\", {}, to),\n\t\t\t\n\t\t\t// Type\n\t\t\tc(\"td\", {}, REDIRECT_TYPES[type]),\n\t\t\t\n\t\t\t// Delete\n\t\t\tc(\"td\", { \"class\": \"thin action\" }, [\n\t\t\t\tc(\"a\", {\n\t\t\t\t\t\"class\": \"delete icon\",\n\t\t\t\t\t\"title\": \"Delete\",\n\t\t\t\t\t\"click\": e => this.onDeleteClick(e, row)\n\t\t\t\t})\n\t\t\t])\n\t\t]);\n\t\t\n\t\treturn row;\n\t}\n\t\n\trowEdit (id, uri, to, type) {\n\t\treturn [\n\t\t\tc(\"tr\", { \"class\": \"redirects--edit-row\" }, [\n\t\t\t\t// URI\n\t\t\t\tc(\"td\", {}, [\n\t\t\t\t\tc(\"input\", {\n\t\t\t\t\t\t\"value\": id,\n\t\t\t\t\t\t\"type\": \"hidden\",\n\t\t\t\t\t\t\"name\": this.namespaceField(\"id\")\n\t\t\t\t\t}),\n\t\t\t\t\tc(\"input\", {\n\t\t\t\t\t\t\"value\": uri,\n\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\"class\": \"text fullwidth\",\n\t\t\t\t\t\t\"name\": this.namespaceField(\"uri\")\n\t\t\t\t\t}),\n\t\t\t\t]),\n\t\t\t\t\n\t\t\t\t// To\n\t\t\t\tc(\"td\", {}, [\n\t\t\t\t\tc(\"input\", {\n\t\t\t\t\t\t\"value\": to,\n\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\"class\": \"text fullwidth\",\n\t\t\t\t\t\t\"name\": this.namespaceField(\"to\")\n\t\t\t\t\t}),\n\t\t\t\t]),\n\t\t\t\t\n\t\t\t\t// Type\n\t\t\t\tc(\"td\", {}, [\n\t\t\t\t\tc(\"div\", { \"class\": \"select\" }, [\n\t\t\t\t\t\tc(\"select\", {\n\t\t\t\t\t\t\t\"name\": this.namespaceField(\"type\")\n\t\t\t\t\t\t}, Object.keys(REDIRECT_TYPES).map(value => {\n\t\t\t\t\t\t\tconst opts = { value };\n\t\t\t\t\t\t\tif (type === value) opts[\"selected\"] = \"selected\";\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn c(\n\t\t\t\t\t\t\t\t\"option\",\n\t\t\t\t\t\t\t\topts,\n\t\t\t\t\t\t\t\tREDIRECT_TYPES[value]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}))\n\t\t\t\t\t])\n\t\t\t\t]),\n\t\t\t\t\n\t\t\t\t// Spinner\n\t\t\t\tc(\"td\", {}, [\n\t\t\t\t\tc(\"div\", { \"class\": \"spinner hidden\" })\n\t\t\t\t])\n\t\t\t]),\n\t\t\t\n\t\t\tc(\"tr\", { \"class\": \"redirects--edit-controls\" }, [\n\t\t\t\tc(\"td\", { \"colspan\": 4 }, [\n\t\t\t\t\tc(\"input\", {\n\t\t\t\t\t\t\"class\": \"btn submit\",\n\t\t\t\t\t\t\"type\": \"submit\",\n\t\t\t\t\t\t\"value\": \"Update\",\n\t\t\t\t\t}),\n\t\t\t\t\tc(\"input\", {\n\t\t\t\t\t\t\"class\": \"btn\",\n\t\t\t\t\t\t\"type\": \"button\",\n\t\t\t\t\t\t\"value\": \"Cancel\",\n\t\t\t\t\t\t\"click\": () => { this.cancelCurrentEdit(); },\n\t\t\t\t\t}),\n\t\t\t\t])\n\t\t\t])\n\t\t];\n\t}\n\t\n}","/**\n * TextStatistics.js\n * Christopher Giffard (2012)\n * 1:1 API Fork of TextStatistics.php by Dave Child (Thanks mate!)\n * https://github.com/DaveChild/Text-Statistics\n *\n * Modified & re-written for ES6 by Tam<hi@tam.sx>\n */\n\nexport default class TextStatistics {\n\t\n\tconstructor (text) {\n\t\tthis.text = text ? TextStatistics.cleanText(text) : text;\n\t}\n\t\n\t// Statistics\n\t// =========================================================================\n\t\n\t/**\n\t * Calculates the Flesch Kincaid reading ease score\n\t *\n\t * @return {number}\n\t */\n\tfleschKincaidReadingEase () {\n\t\treturn Math.round(\n\t\t\t(\n\t\t\t\t206.835\n\t\t\t\t- (1.015 * this.averageWordsPerSentence())\n\t\t\t\t- (84.6 * this.averageSyllablesPerWord())\n\t\t\t) * 10\n\t\t) / 10;\n\t}\n\t\n\t/**\n\t * Calculates the Flesch Kincaid grade level\n\t *\n\t * @return {number}\n\t */\n\tfleschKincaidGradeLevel () {\n\t\treturn Math.round(\n\t\t\t(\n\t\t\t\t(0.39 * this.averageWordsPerSentence())\n\t\t\t\t+ (11.8 * this.averageSyllablesPerWord())\n\t\t\t\t- 15.59\n\t\t\t) * 10\n\t\t) / 10;\n\t}\n\t\n\t/**\n\t * Calculates the Gunning Fog score\n\t *\n\t * @return {number}\n\t */\n\tgunningFogScore () {\n\t\treturn Math.round(\n\t\t\t(\n\t\t\t\t(\n\t\t\t\t\tthis.averageWordsPerSentence()\n\t\t\t\t\t+ this.percentageWordsWithThreeSyllables(false)\n\t\t\t\t) * 0.4\n\t\t\t) * 10\n\t\t) / 10;\n\t}\n\t\n\t/**\n\t * Calculates the Coleman Liau index\n\t *\n\t * @return {number}\n\t */\n\tcolemanLiauIndex () {\n\t\treturn Math.round(\n\t\t\t(\n\t\t\t\t(\n\t\t\t\t\t5.89\n\t\t\t\t\t* (this.letterCount() / this.wordCount())\n\t\t\t\t) - (\n\t\t\t\t\t0.3\n\t\t\t\t\t* (this.sentenceCount() / this.wordCount())\n\t\t\t\t) - 15.8\n\t\t\t) * 10\n\t\t) / 10;\n\t}\n\t\n\t/**\n\t * Calculates the Smog index\n\t *\n\t * @return {number}\n\t */\n\tsmogIndex () {\n\t\treturn Math.round(\n\t\t\t1.043\n\t\t\t* Math.sqrt(\n\t\t\t\t(\n\t\t\t\t\tthis.wordsWithThreeSyllables()\n\t\t\t\t\t* (30 / this.sentenceCount())\n\t\t\t\t) + 3.1291\n\t\t\t) * 10\n\t\t) / 10;\n\t}\n\t\n\t/**\n\t * Calculates the Automated Readability index\n\t *\n\t * @return {number}\n\t */\n\tautomatedReadabilityIndex () {\n\t\treturn Math.round(\n\t\t\t(\n\t\t\t\t(\n\t\t\t\t\t4.71\n\t\t\t\t\t* (this.letterCount() / this.wordCount())\n\t\t\t\t) + (\n\t\t\t\t\t0.5\n\t\t\t\t\t* (this.wordCount() / this.sentenceCount())\n\t\t\t\t) - 21.43\n\t\t\t) * 10\n\t\t) / 10;\n\t}\n\t\n\t// Helpers\n\t// =========================================================================\n\t\n\t/**\n\t * Cleans the text for processing\n\t *\n\t * @param {string} text - Text to clean\n\t * @return {string}\n\t */\n\tstatic cleanText (text) {\n\t\t// All these tags should be preceded by a full stop\n\t\t['li', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'dd'].forEach(tag => {\n\t\t\ttext.replace(`</${tag}>`, \".\");\n\t\t});\n\t\t\n\t\ttext = text\n\t\t\t\t// Strip tags\n\t\t\t\t.replace(/<[^>]+>/g, '')\n\t\t\t\t\n\t\t\t\t// Replace commas, hyphens etc (count them as spaces)\n\t\t\t\t.replace(/[,:;()-]/g, ' ')\n\t\t\t\t\n\t\t\t\t// Unify terminators\n\t\t        .replace(/[.!?]/g, '.')\n\t\t\t\t\n\t\t\t\t// Strip leading whitespace\n\t\t\t\t.replace(/^\\s+/g, '')\n\t\t\t\t\n\t\t\t\t// Replace new lines with spaces\n\t\t\t\t.replace(/[ ]*(\\n|\\r\\n|\\r)[ ]*/g, ' ')\n\t\t\t\t\n\t\t\t\t// Check for duplicated terminators\n\t\t\t\t.replace(/([.])[. ]+/g, '.')\n\t\t\t\t\n\t\t\t\t// Pad sentence terminators\n\t\t\t\t.replace(/[ ]*([.])/g, '. ')\n\t\t\t\t\n\t\t\t\t// Remove multiple spaces\n\t\t\t\t.replace(/\\s+/g, ' ')\n\t\t\t\t\n\t\t\t\t// Strip trailing whitespace\n\t\t\t\t.replace(/\\s+$/g, '')\n\t\t\t\t\n\t\t\t\t// Strip apostrophe\n\t\t\t\t.replace(/'/g, '');\n\t\t\n\t\t// Add final terminator, just in case it's missing\n\t\ttext += \".\";\n\t\t\n\t\treturn text;\n\t}\n\t\n\t/**\n\t * Counts the number of syllables a given word\n\t *\n\t * @param {string} word\n\t * @return {number}\n\t */\n\tstatic syllableCount (word) {\n\t\tlet syllableCount = 0,\n\t\t\tprefixSuffixCount = 0;\n\t\t\n\t\t// Prepare word - make lower case & remove non-word characters\n\t\tword = word.toLowerCase().replace(/[^a-z]/g, '');\n\t\t\n\t\t// Specific common exceptions that don't follow the rule set below are\n\t\t// handled individually.\n\t\t// Array of problem words (with word as key, syllable count as value)\n\t\tconst problemWords = {\n\t\t\t'simile':       3,\n\t\t\t'forever':      3,\n\t\t\t'shoreline':    2,\n\t\t};\n\t\t\n\t\t// Return if we've hit a problem word\n\t\tif (problemWords.hasOwnProperty(word)) return problemWords[word];\n\t\t\n\t\t// Syllables that would be counted as two, but should be one\n\t\tconst subSyllables = [\n\t\t\t/cial/,\n\t\t\t/tia/,\n\t\t\t/cius/,\n\t\t\t/cious/,\n\t\t\t/giu/,\n\t\t\t/ion/,\n\t\t\t/iou/,\n\t\t\t/sia$/,\n\t\t\t/[^aeiuoyt]{2,}ed$/,\n\t\t\t/.ely$/,\n\t\t\t/[cg]h?e[rsd]?$/,\n\t\t\t/rved?$/,\n\t\t\t/[aeiouy][dt]es?$/,\n\t\t\t/[aeiouy][^aeiouydt]e[rsd]?$/,\n\t\t\t/^[dr]e[aeiou][^aeiou]+$/,      // Sorts out deal, deign etc.\n\t\t\t/[aeiouy]rse$/,                 // Purse, hearse\n\t\t];\n\t\t\n\t\t// Syllables that would be counted as one, but should be two\n\t\tconst addSyllables = [\n\t\t\t/ia/,\n\t\t\t/riet/,\n\t\t\t/dien/,\n\t\t\t/iu/,\n\t\t\t/io/,\n\t\t\t/ii/,\n\t\t\t/[aeiouym]bl$/,\n\t\t\t/[aeiou]{3}/,\n\t\t\t/^mc/,\n\t\t\t/ism$/,\n\t\t\t/([^aeiouy])\\1l$/,\n\t\t\t/[^l]lien/,\n\t\t\t/^coa[dglx]./,\n\t\t\t/[^gq]ua[^auieo]/,\n\t\t\t/dnt$/,\n\t\t\t/uity$/,\n\t\t\t/ie(r|st)$/\n\t\t];\n\t\t\n\t\t// Single syllable prefixes & suffixes\n\t\tconst prefixSuffix = [\n\t\t\t/^un/,\n\t\t\t/^fore/,\n\t\t\t/ly$/,\n\t\t\t/less$/,\n\t\t\t/ful$/,\n\t\t\t/ers?$/,\n\t\t\t/ings?$/\n\t\t];\n\t\t\n\t\t// Remove prefixes & suffixes, and count how many were takes\n\t\tprefixSuffix.forEach(regex => {\n\t\t\tif (word.match(regex)) {\n\t\t\t\tword = word.replace(regex, '');\n\t\t\t\tprefixSuffixCount++;\n\t\t\t}\n\t\t});\n\t\t\n\t\tlet wordPartCount = word\n\t\t\t.split(/[^aeiouy]+/ig)\n\t\t\t.filter(wordPart => !!wordPart.replace(/\\s+/ig, '').length)\n\t\t\t.length;\n\t\t\n\t\t// Get preliminary syllable count\n\t\tsyllableCount = wordPartCount + prefixSuffixCount;\n\t\t\n\t\t// Some syllables do not follow normal rules, check for them\n\t\tsubSyllables.forEach(syllable => {\n\t\t\tword.match(syllable) && syllableCount--;\n\t\t});\n\t\t\n\t\taddSyllables.forEach(syllable => {\n\t\t\tword.match(syllable) && syllableCount++;\n\t\t});\n\t\t\n\t\treturn syllableCount || 1;\n\t}\n\t\n\t/**\n\t * Returns the length of the text\n\t *\n\t * @return {Number}\n\t */\n\ttextLength () {\n\t\treturn this.text.length;\n\t}\n\t\n\t/**\n\t * Counts the number of letters in the text\n\t *\n\t * @return {Number}\n\t */\n\tletterCount () {\n\t\treturn this.text.replace(/[^a-z]+/ig, '').length;\n\t}\n\t\n\t/**\n\t * Counts the number of sentences in the text\n\t *\n\t * @return {Number|number}\n\t */\n\tsentenceCount () {\n\t\t// FIXME: This will be tripped up by \"Mr.\" or \"U.K.\"\n\t\treturn this.text.replace(/[^.!?]/g, '').length || 1;\n\t}\n\t\n\t/**\n\t * Counts the number of words in the text\n\t *\n\t * @return {number}\n\t */\n\twordCount () {\n\t\treturn this.words().length || 1;\n\t}\n\t\n\t/**\n\t * Splits the text into an array of words.\n\t *\n\t * @return {Array}\n\t */\n\twords () {\n\t\tif (this._words) return this._words;\n\t\tthis._words = this.text.split(/[^a-z0-9']+/i);\n\t\treturn this._words;\n\t}\n\t\n\t/**\n\t * Calculates the average number of words per sentence\n\t *\n\t * @return {number}\n\t */\n\taverageWordsPerSentence () {\n\t\treturn this.wordCount() / this.sentenceCount();\n\t}\n\t\n\t/**\n\t * Calculates the average number of syllables per word\n\t *\n\t * @return {number}\n\t */\n\taverageSyllablesPerWord () {\n\t\tlet syllableCount = 0,\n\t\t\twordCount = this.wordCount();\n\t\t\n\t\tthis.text.split(/\\s+/).forEach(word => {\n\t\t\tsyllableCount += TextStatistics.syllableCount(word);\n\t\t});\n\t\t\n\t\treturn (syllableCount || 1) / (wordCount || 1);\n\t}\n\t\n\t/**\n\t * Counts the number of words in the text w/ three syllables\n\t *\n\t * @param {boolean} countProperNouns - If true, will ignore proper nouns or\n\t *     capitalized words.\n\t * @return {number}\n\t */\n\twordsWithThreeSyllables (countProperNouns = true) {\n\t\tlet longWordCount = 0;\n\t\t\n\t\tcountProperNouns = countProperNouns !== false;\n\t\t\n\t\tthis.text.split(/\\s+/).forEach(word => {\n\t\t\t// We don't count proper nouns or capitalized words if the\n\t\t\t// `countProperNouns` argument is set (defaults to true).\n\t\t\tif (!word.match(/^[A-Z]/) || countProperNouns) {\n\t\t\t\tif (this.syllableCount(word) > 2) longWordCount++;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn longWordCount;\n\t}\n\t\n\t/**\n\t * Calculates the percentage of words with three syllables\n\t *\n\t * @param {boolean} countProperNouns - If true, will ignore proper nouns or\n\t *     capitalized words.\n\t * @return {number}\n\t */\n\tpercentageWordsWithThreeSyllables (countProperNouns = true) {\n\t\treturn (\n\t\t\tthis.wordsWithThreeSyllables(countProperNouns) / this.wordCount()\n        ) * 100;\n\t}\n\t\n}","import Redirects from \"./Redirects\";\n\nconst SeoSettings = function (namespace, run, csrf) {\n\tthis.namespace = namespace;\n\tthis.csrf = {\n\t\tname: csrf[0],\n\t\ttoken: csrf[1],\n\t};\n\n\tswitch (run) {\n\t\tcase 'sitemap':\n\t\t\tnew SeoSettings.EditableTable(this.namespace + '-customUrls', this.namespace + '-addCustomUrl');\n\t\t\tbreak;\n\t\tcase 'redirects':\n\t\t\tthis.redirectsForm();\n\t\t\tbreak;\n\t\tcase 'settings':\n\t\t\tthis.sitemapName();\n\t\t\tbreak;\n\t}\n};\n\nwindow.SeoSettings = SeoSettings;\n\n// Sitemap\n// =============================================================================\nSeoSettings.prototype.sitemapName = function () {\n\tconst example = document.getElementById(this.namespace + '-sitemapNameExample');\n\tdocument.getElementById(this.namespace + '-sitemapName').addEventListener('input', function () {\n\t\texample.textContent = this.value + '.xml';\n\t});\n};\n\n// Redirects\n// =============================================================================\nSeoSettings.prototype.redirectsForm = function () {\n\tnew Redirects(this.namespace, this.csrf);\n};\n\n// Helpers\n// =============================================================================\nSeoSettings.EditableTable = function (tableId, addButtonId, rowCb) {\n\tthis.rowCb = (typeof rowCb === \"function\" ? rowCb : function () {});\n\tthis.table = document.getElementById(tableId).getElementsByTagName('tbody')[0];\n\tthis.row = this.table.firstElementChild.cloneNode(true);\n\tthis.table.firstElementChild.remove();\n\n\tthis.row.classList.remove('hidden');\n\n\t[].slice.call(this.table.getElementsByClassName('delete')).forEach((el) => {\n\t\tel.addEventListener('click', () => {\n\t\t\tel.parentNode.parentNode.remove();\n\t\t\tthis.rowCb();\n\t\t});\n\t});\n\n\tdocument.getElementById(addButtonId).addEventListener('click', () => {\n\t\tthis.addRow();\n\t});\n};\n\nSeoSettings.EditableTable.prototype.addRow = function () {\n\tconst newRow = this.row.cloneNode(true);\n\n\tnewRow.innerHTML = newRow.innerHTML.replace(/{i}/g, this.table.childNodes.length - 2);\n\n\tnewRow.getElementsByClassName('delete')[0].addEventListener('click', () => {\n\t\tnewRow.remove();\n\t\tthis.rowCb();\n\t});\n\n\tthis.table.appendChild(newRow);\n\n\tthis.rowCb();\n};"],"names":["createElement","tag","attributes","children","elem","document","Object","entries","key","value","replace","trim","setAttribute","addEventListener","Array","isArray","map","child","appendChild","_","createTextNode","REDIRECT_TYPES","text","TextStatistics","cleanText","Math","round","this","averageWordsPerSentence","averageSyllablesPerWord","percentageWordsWithThreeSyllables","letterCount","wordCount","sentenceCount","sqrt","wordsWithThreeSyllables","length","words","_words","split","syllableCount","forEach","word","countProperNouns","longWordCount","match","_this","prefixSuffixCount","toLowerCase","problemWords","hasOwnProperty","subSyllables","addSyllables","regex","wordPartCount","filter","wordPart","syllable","Redirects","namespace","csrf","onSubmitNew","preventDefault","form","e","target","spinner","getElementsByClassName","uri","elements","namespaceField","to","type","valid","classList","add","remove","post","id","table","rowStatic","cp","displayNotice","reset","focus","displayError","error","onSubmitBulk","redirects","separator","onUpdate","row","editRow","cancelCurrentEdit","insertBefore","removeChild","onEditClick","dataset","editRows","rowEdit","getElementsByTagName","onDeleteClick","confirm","ns","getElementById","tableForm","newForm","bulkForm","initTable","slice","call","links","handle","action","fields","onSuccess","onError","formData","FormData","append","name","token","keys","xhr","XMLHttpRequest","open","setRequestHeader","onload","data","responseText","status","JSON","parse","babelHelpers.typeof","onerror","send","c","tabindex","data-id","class","_this3","opts","colspan","SeoSettings","run","EditableTable","redirectsForm","sitemapName","window","prototype","example","textContent","tableId","addButtonId","rowCb","firstElementChild","cloneNode","el","parentNode","addRow","newRow","innerHTML","childNodes"],"mappings":"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"}