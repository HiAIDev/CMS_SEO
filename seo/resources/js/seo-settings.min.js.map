{"version":3,"file":"seo-settings.min.js","sources":["../../../resources/js/Helpers.js","../../../resources/js/Redirects.js","../../../resources/js/seo-settings.js"],"sourcesContent":["/**\n * ## Create Element\n * Quick and easy DOM element creation\n *\n * @param {string=} tag - The element tag\n * @param {object=} attributes - The attributes to add, mapping the key as\n *     the attribute name, and the value as its value. If the value is a\n *     function, it will be added as an event.\n * @param {(Array|*)=} children - An array of children (can be a mixture of\n *     Nodes to append, or other values to be stringified and appended\n *     as text).\n * @return {Element} - The created element\n */\nexport function createElement (\n\ttag = \"div\",\n\tattributes = {},\n\tchildren = []\n) {\n\tconst elem = document.createElement(tag);\n\t\n\tfor (let [key, value] of Object.entries(attributes)) {\n\t\tif (typeof value === typeof (() => {})) {\n\t\t\telem.addEventListener(key, value);\n\t\t\tcontinue;\n\t\t}\n\t\t\n\t\telem.setAttribute(key, value);\n\t}\n\t\n\tif (!Array.isArray(children))\n\t\tchildren = [children];\n\t\n\tchildren.map(child => {\n\t\ttry {\n\t\t\telem.appendChild(child);\n\t\t} catch (_) {\n\t\t\telem.appendChild(document.createTextNode(child));\n\t\t}\n\t});\n\t\n\treturn elem;\n}","/* globals Craft */\n\nimport { createElement } from \"./Helpers\";\n\nconst REDIRECT_TYPES = {\n\t\"301\": \"301 (Permanent)\",\n\t\"302\": \"302 (Temporary)\",\n};\n\nexport default class Redirects {\n\t\n\tconstructor (namespace, csrf) {\n\t\tthis.ns = namespace;\n\t\tthis.csrf = csrf;\n\t\t\n\t\tthis.table = document.getElementById(namespace + \"-redirectTable\");\n\t\tthis.tableForm = document.getElementById(namespace + \"-tableForm\");\n\t\tthis.newForm = document.getElementById(namespace + \"-redirectsNew\");\n\t\tthis.bulkForm = document.getElementById(namespace + \"-redirectsBulk\");\n\t\t\n\t\tthis.cancelCurrentEdit = () => {};\n\t\tthis.editRow = null;\n\t\t\n\t\tthis.tableForm.addEventListener(\"submit\", this.onUpdate);\n\t\tthis.newForm.addEventListener(\"submit\", this.onSubmitNew);\n\t\tthis.bulkForm.addEventListener(\"submit\", this.onSubmitBulk);\n\t\t\n\t\tthis.initTable();\n\t}\n\t\n\tinitTable () {\n\t\t[].slice.call(this.table.getElementsByTagName(\"tr\")).forEach(row => {\n\t\t\tconst links = row.getElementsByTagName(\"a\");\n\t\t\t\n\t\t\trow.addEventListener(\"click\", e => {\n\t\t\t\tthis.onEditClick(e, row);\n\t\t\t});\n\t\t\t\n\t\t\tlinks[1].addEventListener(\"click\", e => {\n\t\t\t\tthis.onDeleteClick(e, row);\n\t\t\t});\n\t\t});\n\t}\n\t\n\t// Events\n\t// =========================================================================\n\t\n\tonSubmitNew = e => {\n\t\te.preventDefault();\n\t\tconst form = e.target\n\t\t\t, spinner = form.getElementsByClassName(\"spinner\")[0];\n\t\t\n\t\tconst uri  = form.elements[this.namespaceField(\"uri\")]\n\t\t\t, to   = form.elements[this.namespaceField(\"to\")]\n\t\t\t, type = form.elements[this.namespaceField(\"type\")];\n\t\t\n\t\t// Validate\n\t\tlet valid = true;\n\t\tif (uri.value.trim() === \"\") {\n\t\t\turi.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else uri.classList.remove(\"error\");\n\t\t\n\t\tif (to.value.trim() === \"\") {\n\t\t\tto.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else to.classList.remove(\"error\");\n\t\t\n\t\tif (!valid) return;\n\t\t\n\t\t// Submit\n\t\tspinner.classList.remove(\"hidden\");\n\t\t\n\t\tthis.post(\"addRedirect\", {\n\t\t\turi: uri.value,\n\t\t\tto: to.value,\n\t\t\ttype: type.value,\n\t\t}, ({ id }) => {\n\t\t\tthis.table.appendChild(this.rowStatic(\n\t\t\t\tid, uri.value, to.value, type.value\n\t\t\t));\n\t\t\t\n\t\t\tCraft.cp.displayNotice('<strong>SEO:</strong> Redirect added successfully!');\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t\t\n\t\t\tform.reset();\n\t\t\turi.focus();\n\t\t}, error => {\n\t\t\tCraft.cp.displayError('<strong>SEO:</strong> ' + error);\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t});\n\t};\n\t\n\tonSubmitBulk = e => {\n\t\te.preventDefault();\n\t\tconst form = e.target\n\t\t\t, spinner = form.getElementsByClassName(\"spinner\")[0];\n\t\t\n\t\tconst redirects = form.elements[this.namespaceField(\"redirects\")]\n\t\t\t, separator = form.elements[this.namespaceField(\"separator\")]\n\t\t\t, type      = form.elements[this.namespaceField(\"type\")];\n\t\t\n\t\t// Validate\n\t\tlet valid = true;\n\t\tif (redirects.value.trim() === \"\") {\n\t\t\tredirects.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else redirects.classList.remove(\"error\");\n\t\t\n\t\tif (separator.value === \"\") {\n\t\t\tseparator.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else separator.classList.remove(\"error\");\n\t\t\n\t\tif (!valid) return;\n\t\t\n\t\t// Submit\n\t\tspinner.classList.remove(\"hidden\");\n\t\t\n\t\tthis.post(\"bulkAddRedirects\", {\n\t\t\tredirects: redirects.value,\n\t\t\tseparator: separator.value,\n\t\t\ttype: type.value,\n\t\t}, ({ redirects }) => {\n\t\t\tredirects.forEach(({ id, uri, to, type }) => {\n\t\t\t\tthis.table.appendChild(this.rowStatic(\n\t\t\t\t\tid, uri, to, type\n\t\t\t\t));\n\t\t\t});\n\t\t\t\n\t\t\tCraft.cp.displayNotice('<strong>SEO:</strong> Redirects added successfully!');\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t\t\n\t\t\tform.reset();\n\t\t}, error => {\n\t\t\tCraft.cp.displayError('<strong>SEO:</strong> ' + error);\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t});\n\t};\n\t\n\t// TODO: Remove save / update boilerplate\n\t\n\tonUpdate = e => {\n\t\te.preventDefault();\n\t\tconst form = e.target\n\t\t\t, spinner = form.getElementsByClassName(\"spinner\")[0];\n\t\t\n\t\tconst id  = form.elements[this.namespaceField(\"id\")]\n\t\t\t, uri  = form.elements[this.namespaceField(\"uri\")]\n\t\t\t, to   = form.elements[this.namespaceField(\"to\")]\n\t\t\t, type = form.elements[this.namespaceField(\"type\")];\n\t\t\n\t\t// Validate\n\t\tlet valid = true;\n\t\tif (uri.value.trim() === \"\") {\n\t\t\turi.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else uri.classList.remove(\"error\");\n\t\t\n\t\tif (to.value.trim() === \"\") {\n\t\t\tto.classList.add(\"error\");\n\t\t\tvalid = false;\n\t\t} else to.classList.remove(\"error\");\n\t\t\n\t\tif (!valid) return;\n\t\t\n\t\t// Submit\n\t\tspinner.classList.remove(\"hidden\");\n\t\t\n\t\tthis.post(\"updateRedirect\", {\n\t\t\tid: id.value,\n\t\t\turi: uri.value,\n\t\t\tto: to.value,\n\t\t\ttype: type.value,\n\t\t}, () => {\n\t\t\tconst row = this.editRow;\n\t\t\t\n\t\t\tthis.cancelCurrentEdit();\n\t\t\t\n\t\t\tthis.table.insertBefore(\n\t\t\t\tthis.rowStatic(\n\t\t\t\t\tid.value, uri.value, to.value, type.value\n\t\t\t\t),\n\t\t\t\trow\n\t\t\t);\n\t\t\t\n\t\t\tthis.table.removeChild(row);\n\t\t}, error => {\n\t\t\tCraft.cp.displayError('<strong>SEO:</strong> ' + error);\n\t\t\tspinner.classList.add(\"hidden\");\n\t\t});\n\t};\n\t\n\tonEditClick = (e, row) => {\n\t\te.preventDefault();\n\t\t\n\t\tif (e.target.classList.contains(\"delete\")) return;\n\t\t\n\t\tconst { id, uri, to, type } = row.dataset;\n\t\tthis.cancelCurrentEdit();\n\t\t\n\t\tconst editRows = this.rowEdit(id, uri, to, type);\n\t\t\n\t\tthis.editRow = row;\n\t\t\n\t\tthis.cancelCurrentEdit = () => {\n\t\t\tthis.table.insertBefore(row, editRows[0]);\n\t\t\tthis.table.removeChild(editRows[0]);\n\t\t\tthis.table.removeChild(editRows[1]);\n\t\t\t\n\t\t\tthis.cancelCurrentEdit = () => {};\n\t\t\tthis.editRow = null;\n\t\t};\n\t\t\n\t\tthis.table.insertBefore(\n\t\t\teditRows[0],\n\t\t\trow\n\t\t);\n\t\t\n\t\tthis.table.insertBefore(\n\t\t\teditRows[1],\n\t\t\trow\n\t\t);\n\t\t\n\t\tconst focusIndex = e.target.tagName.toLowerCase() === \"a\" ||\n\t\t                   e.target.firstElementChild ? 1 : 2;\n\t\t\n\t\tconst input = editRows[0].getElementsByTagName(\"input\")[focusIndex];\n\t\tinput.focus();\n\t\tsetTimeout(() => {\n\t\t\tinput.selectionStart = input.selectionEnd = 10000;\n\t\t}, 0);\n\t\t\n\t\tthis.table.removeChild(row);\n\t};\n\t\n\tonDeleteClick = (e, row) => {\n\t\te.preventDefault();\n\t\t\n\t\tif (!confirm(\"Delete this redirect?\"))\n\t\t\treturn;\n\t\t\n\t\tthis.post(\"removeRedirect\", {\n\t\t\tid: row.dataset.id\n\t\t}, () => {\n\t\t\tCraft.cp.displayNotice('<strong>SEO:</strong> Redirect deleted');\n\t\t\tthis.table.removeChild(row);\n\t\t}, error => {\n\t\t\tCraft.cp.displayNotice('<strong>SEO:</strong> ' + error);\n\t\t});\n\t};\n\t\n\t// Helpers\n\t// =========================================================================\n\t\n\tnamespaceField (handle) {\n\t\treturn `${this.ns}[${handle}]`;\n\t}\n\t\n\tpost (\n\t\taction,\n\t\tfields = {},\n\t\tonSuccess = () => {},\n\t\tonError = () => {}\n\t) {\n\t\tconst formData = new FormData();\n\t\t\n\t\tformData.append(this.csrf.name, this.csrf.token);\n\t\tformData.append(\"action\", `seo/redirects/${action}`);\n\t\t\n\t\tObject.keys(fields).forEach(key => {\n\t\t\tif (fields.hasOwnProperty(key))\n\t\t\t\tformData.append(key, fields[key]);\n\t\t});\n\t\t\n\t\tconst xhr = new XMLHttpRequest();\n\t\txhr.open('POST', \"/\", true);\n\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\t\t\n\t\txhr.onload = function() {\n\t\t\tlet data = xhr.responseText;\n\t\t\tif (xhr.status >= 200 && xhr.status < 400) {\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t\tif (data.hasOwnProperty(\"success\")) {\n\t\t\t\t\tonSuccess(data);\n\t\t\t\t} else if (data.hasOwnProperty(\"error\")) {\n\t\t\t\t\tif (typeof data.error === typeof \"\") {\n\t\t\t\t\t\tonError(data.error);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonError(data.error[Object.keys(data.error)[0]][0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tonError(data);\n\t\t\t}\n\t\t};\n\t\t\n\t\txhr.onerror = function () {\n\t\t\tonError(\"An unknown error has occurred\");\n\t\t};\n\t\t\n\t\txhr.send(formData);\n\t}\n\t\n\trowStatic (id = -1, uri = \"\", to = \"\", type = 301) {\n\t\tconst row = createElement(\"tr\", {\n\t\t\t\"tabindex\": 0,\n\t\t\t\"data-id\": id,\n\t\t\t\"data-uri\": uri,\n\t\t\t\"data-to\": to,\n\t\t\t\"data-type\": type,\n\t\t\t\"click\": e => this.onEditClick(e, row)\n\t\t}, [\n\t\t\t// URI\n\t\t\tcreateElement(\"td\", { \"class\": \"redirects--title-col\" }, [\n\t\t\t\tcreateElement(\"div\", { \"class\": \"element small\" }, [\n\t\t\t\t\tcreateElement(\"div\", { \"class\": \"label\" }, [\n\t\t\t\t\t\tcreateElement(\"span\", { \"class\": \"title\" }, [\n\t\t\t\t\t\t\tcreateElement(\"a\", {\n\t\t\t\t\t\t\t\t\"href\": \"#\",\n\t\t\t\t\t\t\t\t\"title\": \"Edit Redirect\",\n\t\t\t\t\t\t\t\t\"click\": e => { e.preventDefault(); }\n\t\t\t\t\t\t\t}, uri)\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t]),\n\t\t\t\n\t\t\t// To\n\t\t\tcreateElement(\"td\", {}, to),\n\t\t\t\n\t\t\t// Type\n\t\t\tcreateElement(\"td\", {}, REDIRECT_TYPES[type]),\n\t\t\t\n\t\t\t// Delete\n\t\t\tcreateElement(\"td\", { \"class\": \"thin action\" }, [\n\t\t\t\tcreateElement(\"a\", {\n\t\t\t\t\t\"class\": \"delete icon\",\n\t\t\t\t\t\"title\": \"Delete\",\n\t\t\t\t\t\"click\": e => this.onDeleteClick(e, row)\n\t\t\t\t})\n\t\t\t])\n\t\t]);\n\t\t\n\t\treturn row;\n\t}\n\t\n\trowEdit (id, uri, to, type) {\n\t\treturn [\n\t\t\tcreateElement(\"tr\", { \"class\": \"redirects--edit-row\" }, [\n\t\t\t\t// URI\n\t\t\t\tcreateElement(\"td\", {}, [\n\t\t\t\t\tcreateElement(\"input\", {\n\t\t\t\t\t\t\"value\": id,\n\t\t\t\t\t\t\"type\": \"hidden\",\n\t\t\t\t\t\t\"name\": this.namespaceField(\"id\")\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(\"input\", {\n\t\t\t\t\t\t\"value\": uri,\n\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\"class\": \"text fullwidth\",\n\t\t\t\t\t\t\"name\": this.namespaceField(\"uri\")\n\t\t\t\t\t}),\n\t\t\t\t]),\n\t\t\t\t\n\t\t\t\t// To\n\t\t\t\tcreateElement(\"td\", {}, [\n\t\t\t\t\tcreateElement(\"input\", {\n\t\t\t\t\t\t\"value\": to,\n\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\"class\": \"text fullwidth\",\n\t\t\t\t\t\t\"name\": this.namespaceField(\"to\")\n\t\t\t\t\t}),\n\t\t\t\t]),\n\t\t\t\t\n\t\t\t\t// Type\n\t\t\t\tcreateElement(\"td\", {}, [\n\t\t\t\t\tcreateElement(\"div\", { \"class\": \"select\" }, [\n\t\t\t\t\t\tcreateElement(\"select\", {\n\t\t\t\t\t\t\t\"name\": this.namespaceField(\"type\")\n\t\t\t\t\t\t}, Object.keys(REDIRECT_TYPES).map(value => {\n\t\t\t\t\t\t\tconst opts = { value };\n\t\t\t\t\t\t\tif (type === value) opts[\"selected\"] = \"selected\";\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn createElement(\"option\", opts, REDIRECT_TYPES[value]);\n\t\t\t\t\t\t}))\n\t\t\t\t\t])\n\t\t\t\t]),\n\t\t\t\t\n\t\t\t\t// Spinner\n\t\t\t\tcreateElement(\"td\", {}, [\n\t\t\t\t\tcreateElement(\"div\", { \"class\": \"spinner hidden\" })\n\t\t\t\t])\n\t\t\t]),\n\t\t\t\n\t\t\tcreateElement(\"tr\", { \"class\": \"redirects--edit-controls\" }, [\n\t\t\t\tcreateElement(\"td\", { \"colspan\": 4 }, [\n\t\t\t\t\tcreateElement(\"input\", {\n\t\t\t\t\t\t\"class\": \"btn submit\",\n\t\t\t\t\t\t\"type\": \"submit\",\n\t\t\t\t\t\t\"value\": \"Update\",\n\t\t\t\t\t}),\n\t\t\t\t\tcreateElement(\"input\", {\n\t\t\t\t\t\t\"class\": \"btn\",\n\t\t\t\t\t\t\"type\": \"button\",\n\t\t\t\t\t\t\"value\": \"Cancel\",\n\t\t\t\t\t\t\"click\": () => { this.cancelCurrentEdit(); },\n\t\t\t\t\t}),\n\t\t\t\t])\n\t\t\t])\n\t\t];\n\t}\n\t\n}","import Redirects from \"./Redirects\";\n\nconst SeoSettings = function (namespace, run, csrf) {\n\tthis.namespace = namespace;\n\tthis.csrf = {\n\t\tname: csrf[0],\n\t\ttoken: csrf[1],\n\t};\n\n\tswitch (run) {\n\t\tcase 'sitemap':\n\t\t\tnew SeoSettings.EditableTable(this.namespace + '-customUrls', this.namespace + '-addCustomUrl');\n\t\t\tbreak;\n\t\tcase 'redirects':\n\t\t\tthis.redirectsForm();\n\t\t\tbreak;\n\t\tcase 'settings':\n\t\t\tthis.sitemapName();\n\t\t\tbreak;\n\t}\n};\n\n// Sitemap\n// =============================================================================\nSeoSettings.prototype.sitemapName = function () {\n\tconst example = document.getElementById(this.namespace + '-sitemapNameExample');\n\tdocument.getElementById(this.namespace + '-sitemapName').addEventListener('input', function () {\n\t\texample.textContent = this.value + '.xml';\n\t});\n};\n\n// Redirects\n// =============================================================================\nSeoSettings.prototype.redirectsForm = function () {\n\tnew Redirects(this.namespace, this.csrf);\n};\n\n// Helpers\n// =============================================================================\nSeoSettings.EditableTable = function (tableId, addButtonId, rowCb) {\n\tthis.rowCb = (typeof rowCb === \"function\" ? rowCb : function () {});\n\tthis.table = document.getElementById(tableId).getElementsByTagName('tbody')[0];\n\tthis.row = this.table.firstElementChild.cloneNode(true);\n\tthis.table.firstElementChild.remove();\n\n\tthis.row.classList.remove('hidden');\n\n\t[].slice.call(this.table.getElementsByClassName('delete')).forEach((el) => {\n\t\tel.addEventListener('click', () => {\n\t\t\tel.parentNode.parentNode.remove();\n\t\t\tthis.rowCb();\n\t\t});\n\t});\n\n\tdocument.getElementById(addButtonId).addEventListener('click', () => {\n\t\tthis.addRow();\n\t});\n};\n\nSeoSettings.EditableTable.prototype.addRow = function () {\n\tconst newRow = this.row.cloneNode(true);\n\n\tnewRow.innerHTML = newRow.innerHTML.replace(/{i}/g, this.table.childNodes.length - 2);\n\n\tnewRow.getElementsByClassName('delete')[0].addEventListener('click', () => {\n\t\tnewRow.remove();\n\t\tthis.rowCb();\n\t});\n\n\tthis.table.appendChild(newRow);\n\n\tthis.rowCb();\n};"],"names":["createElement","tag","attributes","children","elem","document","Object","entries","key","value","setAttribute","addEventListener","Array","isArray","map","appendChild","child","_","createTextNode","REDIRECT_TYPES","Redirects","namespace","csrf","onSubmitNew","preventDefault","form","e","target","spinner","getElementsByClassName","uri","elements","_this","namespaceField","to","type","valid","trim","classList","add","remove","post","id","table","rowStatic","cp","displayNotice","reset","focus","displayError","error","onSubmitBulk","redirects","separator","forEach","onUpdate","row","editRow","cancelCurrentEdit","insertBefore","removeChild","onEditClick","contains","dataset","editRows","rowEdit","focusIndex","tagName","toLowerCase","firstElementChild","input","getElementsByTagName","selectionStart","selectionEnd","onDeleteClick","confirm","ns","getElementById","tableForm","newForm","bulkForm","this","initTable","slice","call","links","handle","action","fields","onSuccess","onError","formData","FormData","append","name","token","keys","hasOwnProperty","xhr","XMLHttpRequest","open","setRequestHeader","onload","data","responseText","status","JSON","parse","babelHelpers.typeof","onerror","send","_this3","class","opts","colspan","SeoSettings","run","EditableTable","redirectsForm","sitemapName","prototype","example","textContent","tableId","addButtonId","rowCb","cloneNode","el","parentNode","addRow","newRow","innerHTML","replace","childNodes","length"],"mappings":"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"}